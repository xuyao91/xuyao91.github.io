
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>老徐</title>
  <meta name="author" content="Peter Xu">

  
  <meta name="description" content="8、Fabric 浏览器的部署 8.1 环境准备 1、nodejs安装，在第1节里已经说过node的安装，需要注意的是node版本应该是v9.x以下。
2、PostgreSQL的安装，浏览器会把监听到的数据存储在pg里，所以需要安装pg数据。 ">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://xuyao.club/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="老徐" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://cdn.staticfile.org/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">老徐</a></h1>
  
    <h2>Never underestimate your power to change yourself!</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://cn.bing.com" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="xuyao.club">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/2015/06/05/about-me-with-ruby-code/">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/12/29/deployment-of-fabric-multiple-servers-iiiii/">Fabric多台服务器的部署(五)</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-12-29T16:57:34+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>4:57 pm</span></time>
        
        <!-- doushuo commnet -->
        
          | <a href="/blog/2018/12/29/deployment-of-fabric-multiple-servers-iiiii/#comments">Comments</a>
         
      </p>
    
  </header>


  <div class="entry-content"><h4>8、Fabric 浏览器的部署</h4>

<h6>8.1 环境准备</h6>

<p>1、nodejs安装，在第1节里已经说过node的安装，需要注意的是node版本应该是v9.x以下。<br/>
2、PostgreSQL的安装，浏览器会把监听到的数据存储在pg里，所以需要安装pg数据。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2018/12/29/deployment-of-fabric-multiple-servers-iiiii/">Read on&rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/12/29/deployment-of-fabric-multiple-servers-iiii/">Fabric多台服务器的部署(四)</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-12-29T16:51:08+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>4:51 pm</span></time>
        
        <!-- doushuo commnet -->
        
          | <a href="/blog/2018/12/29/deployment-of-fabric-multiple-servers-iiii/#comments">Comments</a>
         
      </p>
    
  </header>


  <div class="entry-content"><h4>7、创建channel和chaincode</h4>

<p> &emsp; 之前我们说过，本项目是一个nodejs的项目，是根据<a href="https://github.com/hyperledger/fabric-samples">https://github.com/hyperledger/fabric-samples</a>里的balance_transfer稍作修改来的，所以这里我们创建channel和chaincode，包括数据上链都会用nodejs sdk来做。</p>

<h6>7.1、启动nodejs服务</h6>

<p> &emsp;进入我们的trace_wine项目，使用npm安装项目所需的package,</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>npm install</span></code></pre></td></tr></table></div></figure>


<p>安装完后，我们现在要启动node服务，我们可以看下，当前目录下面的个runApp.sh的脚本文件，看下里面内容就知道，这是个启动node服务的脚本</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2018/12/29/deployment-of-fabric-multiple-servers-iiii/">Read on&rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/12/29/deployment-of-fabric-multiple-servers-iii/">Fabric多台服务器的部署(三)</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-12-29T16:48:58+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>4:48 pm</span></time>
        
        <!-- doushuo commnet -->
        
          | <a href="/blog/2018/12/29/deployment-of-fabric-multiple-servers-iii/#comments">Comments</a>
         
      </p>
    
  </header>


  <div class="entry-content"><h4>6、启动Fabric网络</h4>

<p>&emsp;完成上面的工作后，我们已经生成了Fabric所需要的证书和创世纪块等一些必要文件后，现在我们就需要配置docker文件，来启动Fabric网络，之前我们讲过需要启动的一些服务，现在在列一下，服务器一共有4台， 跑4个peer，4个ca, 4个kafka，3个zookeeper, 2个orderer，具体信息如下：<br/>
1、Server1：  peer1、Ca1、 Kafka1、Zookeeper1、Orderer1<br/>
2、Server2：  peer2、Ca2、 Kafka2、Zookeeper2、Orderer2<br/>
3、Server3：   peer3、Ca3、 Kafka3、Zookeeper31<br/>
4、Server4：   peer4、Ca4、 Kafka4<br/>
现在我们需要在各台服务器上启动这些服务，需要说明一下，我们需要先启动zookeeper，再启动kafka，然后启动orderer和peer，这些是有先后顺序的，因为各服务之间有依赖关系，不按顺序启动，最后可能各服务之间的通讯有问题，下面依次来启动这些服务。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2018/12/29/deployment-of-fabric-multiple-servers-iii/">Read on&rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/12/14/deployment-of-fabric-multiple-servers-ii/">Fabric多台服务器的部署(二)</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-12-14T14:27:46+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>2:27 pm</span></time>
        
        <!-- doushuo commnet -->
        
          | <a href="/blog/2018/12/14/deployment-of-fabric-multiple-servers-ii/#comments">Comments</a>
         
      </p>
    
  </header>


  <div class="entry-content"><h3>3、下载Fabric镜像</h3>

<h5>3.1.1 下载Fabric 源码</h5>

<p> 1、在后面的例子中，有些地方需要用到源码中提到的工具来编译和生成证书等，这里需要下载一下Fabric的源码，在本地下载Fabric官方提供的源码</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git@github.com:hyperledger/fabric.git</span></code></pre></td></tr></table></div></figure>


<p>需要注意的时候，需要把下载好的源码放在$GOPATH里，这个环境变量是最初安装GO的设置的，如</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>echo $GOPATH
</span><span class='line'>/Users/xuyao/go</span></code></pre></td></tr></table></div></figure>


<p>那么fabric的源码地址路径应该是</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/Users/xuyao/go/src/github.com/hyperledger/fabric/</span></code></pre></td></tr></table></div></figure>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2018/12/14/deployment-of-fabric-multiple-servers-ii/">Read on&rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/12/14/deployment-of-fabric-multiple-servers-i/">Fabric多台服务器的部署(一)</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-12-14T11:55:10+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>11:55 am</span></time>
        
        <!-- doushuo commnet -->
        
          | <a href="/blog/2018/12/14/deployment-of-fabric-multiple-servers-i/#comments">Comments</a>
         
      </p>
    
  </header>


  <div class="entry-content"><h3>1、前言</h3>

<p>  &emsp;Hyperledger Fabric是一个提供分布式账本解决方案的平台。Hyperledger Fabric由模块化架构支撑，并具备极佳的保密性、可伸缩性、灵活性和可扩展性。Hyperledger Fabric被设计成支持不同的模块组件直接拔插启用，并能适应在经济生态系统中错综复杂的各种场景。
 &emsp;目前Fabric在区块链溯源场景应用的挺多，农产品，奢侈品，艺术品，红酒等方面都看过到案例，区块链可以保存产品各个环节的数据，并上链，用户最后可能只需扫描一个二维码，就可以查出某个产品整个的生产过程，与中心化数据不同的是，区块链溯源项目数据一旦上链后不可更改，而且数据公开透明，任何一方都没有权利来更改它，同时每个环节需要为你上链的数据负责，如果哪天消费查出某个环节的数据是假的，由于账本数据是分布式的、不可更改的，大家只相信数据，商家也无法抵赖，最后商家只能认错，名誉扫地，所以区块链本质上是解决一个多方协作的一个信任问题，而对于一件事情需要多方协作，共同记账来一起完成的，Fabric作为联盟链，显然很符合这种需求。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2018/12/14/deployment-of-fabric-multiple-servers-i/">Read on&rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/07/17/cryptography-of-substitution-cipher/">密码学(二)之代换密码</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-07-17T17:28:46+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>5:28 pm</span></time>
        
        <!-- doushuo commnet -->
        
          | <a href="/blog/2018/07/17/cryptography-of-substitution-cipher/#comments">Comments</a>
         
      </p>
    
  </header>


  <div class="entry-content"><h3>（一）代换密码（替换密码）</h3>

<p>上一讲中，我们讲移位密码其实是将字母表中的字母一一对应到各数字，然后通过数字平移来进行加密，古典密码学中还有一种比较有名的加密方法，就是将明文中的字母表对应到一套密文的字母表，这种加密方法我们叫<strong>代换密码（substiution cipher）</strong>或叫<strong>替换密码</strong>，下图就是一个简单的代换密码对应表</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2018/07/17/cryptography-of-substitution-cipher/">Read on&rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/07/13/cryptography-of-shift-cipher/">密码学(一)之移位密码(恺撒密码)</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-07-13T14:03:33+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>2:03 pm</span></time>
        
        <!-- doushuo commnet -->
        
          | <a href="/blog/2018/07/13/cryptography-of-shift-cipher/#comments">Comments</a>
         
      </p>
    
  </header>


  <div class="entry-content"><h3>前言</h3>

<p>   密码学的基本目的是使得两个在不安全的信道上进行安全的通信，在计算机网络中，现假设有两个人Alice和Bob，Alice想发送消息给Bob，告诉他明天凌晨2点毒贩将在4号码头进行交易，请Bob配合缉毒。这里Alice有一个麻烦就是他怕在信息传输中可能会被敌人Oscar监听，甚至篡改消息内容，导致整个计划失败，Bob也对Alice发过来的消息有疑虑，不知道消息是否为Alice本人所发，消息内容是否真实等等。<br/>
   </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2018/07/13/cryptography-of-shift-cipher/">Read on&rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/03/12/how-to-understand-the-restful-router/">如何理解RESTful</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-03-12T11:07:56+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>11:07 am</span></time>
        
        <!-- doushuo commnet -->
        
          | <a href="/blog/2018/03/12/how-to-understand-the-restful-router/#comments">Comments</a>
         
      </p>
    
  </header>


  <div class="entry-content"><h3>什么是REST</h3>

<p>&emsp;&emsp;REST的全称是：Representational State Transfer,直接翻译过来就是：表现层状态转移，表现层的意思就是资源, 这个词语读着比较难理解，网上有一种叫法比较容易理解，叫：URL定位资源，用HTTP动词（GET,POST,PUT,DELETE）描述操作。很简洁，就是看url就知道这个路由是什么了，然后看http的动词method就明白要做什么了，最后看他的 status code就知道返回结果了。REST最大的几个特点为：资源、统一接口、URI和无状态。</p>

<h3>RESTful架构</h3>

<p>&emsp;&emsp;RESTful 是现在比较流行的一种设计风格，它提供了一组设计原则和约束条件，主要用于客户端与服务器的交互。RESTful架构更简洁，更有层次，更易于实现缓存等机制。<br/>
&emsp;&emsp;记得刚工作那会，代码写的比较烂，比如说要写增加商品的路由，会写成下面这样,从RESTful角度来说，这样写其实已经违背了他统一接口和对URI的意义的原则</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">POST</span> <span class="sr">/create_product</span>
</span></code></pre></td></tr></table></div></figure>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2018/03/12/how-to-understand-the-restful-router/">Read on&rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/01/09/about-pg-entrance-exam/">2017年考研记</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-01-09T16:10:41+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>4:10 pm</span></time>
        
        <!-- doushuo commnet -->
        
          | <a href="/blog/2018/01/09/about-pg-entrance-exam/#comments">Comments</a>
         
      </p>
    
  </header>


  <div class="entry-content"><h3>前言</h3>

<p>&emsp;&emsp;17年上半年，为了凑个首付，两人搭上了几年的所有积蓄，还找亲朋好友借了一堆，平常就不太喜欢找人借钱，脸皮薄，开不了口，这次没办法，急用钱。借钱还算顺利，除了几个姐姐主动借给我的，跟同学借的也都给了，之前也借过他们，所以借的比较顺利。那天刷卡时没太多知觉，跟往常买衣服刷卡一样，只是多签了几次字，事后想想挺心痛，两个人几年的存款外加借的债就这样轻松的划走了，换来了一本合同。<br/>
&emsp;&emsp;偶尔也感慨，生活就像一张白纸，能画出什么好看的东西，值不值钱，全凭你自己。回顾这几年的工作，生活经历，虽然也有一些小幅的进步，但并没有从根本上改变什么，只是工作经验多了几年而已。多读了几本书后，发现自己的能力还是撑不起梦想，生活在魔都，每个人都不缺梦想，梦想也值不了钱。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2018/01/09/about-pg-entrance-exam/">Read on&rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/05/06/metaprogramming-ruby-of-monkeypatch/">Ruby元编程之猴子补丁</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-05-06T16:48:53+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>4:48 pm</span></time>
        
        <!-- doushuo commnet -->
        
          | <a href="/blog/2017/05/06/metaprogramming-ruby-of-monkeypatch/#comments">Comments</a>
         
      </p>
    
  </header>


  <div class="entry-content"><h3>打开类</h3>

<p>先看一个例子，</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="mi">3</span><span class="o">.</span><span class="n">times</span> <span class="k">do</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Dog</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;wang...&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="n">wang</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'>   <span class="n">wang</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'>   <span class="n">wang</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2017/05/06/metaprogramming-ruby-of-monkeypatch/">Read on&rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2018/12/29/deployment-of-fabric-multiple-servers-iiiii/">Fabric多台服务器的部署(五)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/12/29/deployment-of-fabric-multiple-servers-iiii/">Fabric多台服务器的部署(四)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/12/29/deployment-of-fabric-multiple-servers-iii/">Fabric多台服务器的部署(三)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/12/14/deployment-of-fabric-multiple-servers-ii/">Fabric多台服务器的部署(二)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/12/14/deployment-of-fabric-multiple-servers-i/">Fabric多台服务器的部署(一)</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - Peter Xu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
